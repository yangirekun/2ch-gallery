(this["webpackJsonp2ch-gallery"]=this["webpackJsonp2ch-gallery"]||[]).push([[0],{33:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAbklEQVRIie2PMQqAMAxFXwfP6qJVPIjYzcOKdUkhQ0BaCoLkLS3k818CjuN8ztApYzIDl7xvmalFsAIZuIFozKPMMrC0CAJwKIkuGVX5KdkmLEm3ci1JSlLKU49yLSmXVG1es0EANvnvInKcP/AA784fpjlWwNQAAAAASUVORK5CYII="},38:function(e,t,a){e.exports=a(76)},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),i=a(11),l=a(37),s=a(12),u=(a(47),Object(n.memo)((function(e){var t=e.id,a=e.label,n=void 0===a?"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f":a,c=e.className,o=void 0===c?"":c,i=e.placeholder,l=void 0===i?"\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430":i,s=e.value,u=void 0===s?"":s,d=e.onChange;return r.a.createElement("div",{className:"input ".concat(o)},r.a.createElement("label",{htmlFor:t,className:"input__label"},n),r.a.createElement("input",{id:t,type:"text",className:"input__field",placeholder:l,value:u,onChange:function(e){var t=e.currentTarget.value;d&&d({value:t})}}))}))),d=a(33),m=a.n(d),E=(a(48),Object(n.memo)((function(e){var t=e.id,a=e.label,c=void 0===a?"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f":a,o=e.className,i=void 0===o?"":o,l=e.placeholder,u=void 0===l?"\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430":l,d=e.list,E=void 0===d?[]:d,p=e.value,f=void 0===p?"":p,b=e.onChange;Object(n.useEffect)((function(){D(E);var e=E.find((function(e){return e.id===f}));e&&j(e.label)}),[E,f]);var v=Object(n.useState)(!1),_=Object(s.a)(v,2),O=_[0],h=_[1],A=Object(n.useState)(""),g=Object(s.a)(A,2),S=g[0],j=g[1],C=Object(n.useState)([]),I=Object(s.a)(C,2),w=I[0],D=I[1],N=function(e){var t=e.currentTarget.id;b&&b({value:t}),h(!1)};return r.a.createElement("div",{className:"select ".concat(i)},r.a.createElement("label",{htmlFor:t,className:"select__label"},c),r.a.createElement("input",{id:t,type:"text",className:"select__field",placeholder:u,value:S,onChange:function(e){var t=e.currentTarget.value;j(t),D(E.filter((function(e){return e.label.toLowerCase().includes(t.toLowerCase())}))),O||h(!0)}}),r.a.createElement("img",{alt:"dropdown-arrow",src:m.a,className:"select__switcher ".concat(O?"select__switcher--expanded":"select__switcher--collapsed"),onClick:function(){h(!O)}}),O&&r.a.createElement("ul",{className:"select__data-list"},w.map((function(e){return r.a.createElement("li",{key:e.id,id:e.id,className:"select__list-item",onClick:N},e.label)}))))}))),p=(a(49),Object(n.memo)((function(e){var t=e.id,a=e.label,n=void 0===a?"\u0422\u0435\u043a\u0441\u0442 \u043a\u043d\u043e\u043f\u043a\u0438":a,c=e.className,o=void 0===c?"":c,i=e.disabled,l=void 0!==i&&i,s=e.onClick;return r.a.createElement("button",{id:t,className:"button ".concat(o),disabled:l,onClick:s},n)}))),f=(a(50),Object(n.memo)((function(e){var t=e.boardsList,a=e.imagesList,n=e.boardID,c=e.onChangeBoardID,o=e.threadID,i=e.onChangeThreadID,l=e.onSearchMedia,s=e.onDownloadAll;return r.a.createElement("form",{className:"app-filters"},r.a.createElement(E,{id:"board-id",label:"\u0414\u043e\u0441\u043a\u0430",className:"app-filters__filter app-filters__filter--board-id",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0441\u043a\u0438",value:n,list:t,onChange:c}),r.a.createElement(u,{id:"thread-id",label:"\u0422\u0440\u0435\u0434",className:"app-filters__filter app-filters__filter--thread-id",placeholder:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0440\u0435\u0434\u0430",value:o,onChange:i}),r.a.createElement(p,{id:"search-media",label:"\u041f\u043e\u0438\u0441\u043a",className:"app-filters__control",onClick:l,disabled:!n||!o}),r.a.createElement(p,{id:"download-media",label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0432\u0441\u0435",className:"app-filters__control",onClick:s,disabled:!a.length}))}))),b=a(21),v=Object(b.a)((function(e){return e.boards.list}),(function(e){return e})),_=Object(b.a)((function(e){return e.images.list}),(function(e){return e})),O=function(e){return e.boards.loading||e.images.loading},h=function(e){return e.boards.error||e.images.error},A={fetchImages:function(e,t){return{type:"FETCH_IMAGES_REQUEST",boardID:e,threadID:t}},downloadImages:function(e){return{type:"DOWNLOAD_IMAGES_REQUEST",imagesList:e}}},g=Object(i.b)((function(e){return{boardsList:v(e),imagesList:_(e)}}),A)((function(e){var t=e.boardsList,a=void 0===t?[]:t,c=e.imagesList,o=void 0===c?[]:c,i=e.fetchImages,l=e.downloadImages,u=Object(n.useState)(""),d=Object(s.a)(u,2),m=d[0],E=d[1],p=Object(n.useCallback)((function(e){var t=e.value;E(t)}),[]),b=Object(n.useState)(""),v=Object(s.a)(b,2),_=v[0],O=v[1],h=Object(n.useCallback)((function(e){var t=e.value;O(t)}),[]),A=Object(n.useCallback)((function(e){e.preventDefault(),i(m,_)}),[m,_,i]),g=Object(n.useCallback)((function(e){e.preventDefault(),l(o)}),[o,l]);return r.a.createElement(f,{boardsList:a,imagesList:o,boardID:m,onChangeBoardID:p,threadID:_,onChangeThreadID:h,onSearchMedia:A,onDownloadAll:g})})),S=(a(51),a(52),Object(n.memo)((function(e){var t=e.imagesList,a=Object(n.useCallback)((function(e){window.open(e.currentTarget.id)}),[]);return r.a.createElement("section",{className:"app__gallery"},t.map((function(e,t){var n=e.alt,c=e.path,o=e.preview,i=e.width,l=e.height;return r.a.createElement("img",{id:c,className:"lazyload app__gallery-item",key:t,alt:n,"data-src":o,width:i,height:l,onClick:a})})))}))),j=Object(i.b)((function(e){return{imagesList:_(e)}}),null)((function(e){var t=e.imagesList,a=void 0===t?[]:t;return r.a.createElement(S,{imagesList:a})})),C=(a(53),Object(n.memo)((function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("main",{className:"spinner__image"}),r.a.createElement("footer",{className:"spinner__message"},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."))}))),I=(a(54),Object(n.memo)((function(){return r.a.createElement("div",{className:"error-wrapper"},r.a.createElement("div",{className:"error"},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 :("))}))),w=Object(n.memo)((function(e){var t=e.isLoading,a=e.error;return r.a.createElement("section",{className:"main-page"},t&&r.a.createElement(C,null),a&&r.a.createElement(I,null),r.a.createElement(g,null),r.a.createElement(j,null))})),D={fetchBoards:function(){return{type:"FETCH_BOARDS_REQUEST"}}},N=Object(i.b)((function(e){return{boards:v(e),isLoading:O(e),error:h(e)}}),D)((function(e){var t=e.boards,a=e.fetchBoards,c=e.isLoading,o=e.error;return Object(n.useEffect)((function(){t.length||a()}),[a,t.length]),r.a.createElement(w,{isLoading:c,error:o})})),L=(a(55),Object(n.memo)((function(e){var t=e.children;return r.a.createElement("div",{className:"app"},r.a.createElement("header",{className:"app-header"}),r.a.createElement("main",{className:"app-main"},t),r.a.createElement("footer",{className:"app-footer"},"implemented by ",r.a.createElement("i",null,"yangirekun")))}))),k=a(5),x=a.n(k),R=a(15),M=a.n(R),T=a(4),y=x.a.mark(Q),U=x.a.mark(H),F=x.a.mark(V),G=x.a.mark(W),B=x.a.mark(K);function Q(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.d)("FETCH_BOARDS_REQUEST",x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(T.b)(M.a,"/api/boards");case 3:return t=e.sent,a=t.data,e.next=7,Object(T.c)({type:"FETCH_BOARDS_SUCCESS",payload:a});case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,Object(T.c)({type:"FETCH_BOARDS_FAILURE"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));case 2:case"end":return e.stop()}}),y)}function H(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.d)("FETCH_IMAGES_REQUEST",x.a.mark((function e(t){var a,n,r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.boardID,n=t.threadID,e.prev=1,e.next=4,Object(T.b)(M.a,"/api/images",{params:{boardID:a,threadID:n}});case 4:return r=e.sent,c=r.data,e.next=8,Object(T.c)({type:"FETCH_IMAGES_SUCCESS",payload:c});case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Object(T.c)({type:"FETCH_IMAGES_FAILURE"});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));case 2:case"end":return e.stop()}}),U)}function V(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.d)("DOWNLOAD_IMAGES_REQUEST",x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.imagesList,e.prev=1,e.next=4,Object(T.b)(M.a,"/api/download-images",{method:"post",data:{images:a}});case 4:return e.next=6,Object(T.b)((function(){return new Promise((function(e,t){var n=0,r=setInterval((function(){if(n<a.length){var t=document.createElement("a");t.download=a[n].fileName,t.href="/images/".concat(a[n].fileName),t.click(),n++}else clearInterval(r),e()}),500)}))}));case 6:return e.next=8,Object(T.c)({type:"DOWNLOAD_IMAGES_SUCCESS"});case 8:return e.next=10,Object(T.c)({type:"REMOVE_IMAGES_REQUEST"});case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Object(T.c)({type:"DOWNLOAD_IMAGES_FAILURE"});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));case 2:case"end":return e.stop()}}),F)}function W(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.d)("REMOVE_IMAGES_REQUEST",x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(T.b)(M.a,"/api/remove-images");case 3:return e.next=5,Object(T.c)({type:"REMOVE_IMAGES_SUCCESS"});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,Object(T.c)({type:"REMOVE_IMAGES_FAILURE"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));case 2:case"end":return e.stop()}}),G)}function K(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.a)([Q(),H(),V(),W()]);case 2:case"end":return e.stop()}}),B)}a(74);var P=a(8),z=a(34),J=a(35),Y=a.n(J),X=a(36),q=a(14),Z={loading:!1,error:!1,list:[]},$={loading:!1,error:!1,list:[]},ee=Object(P.combineReducers)({boards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_BOARDS_REQUEST":return Object(q.a)({},e,{loading:!0,error:!1});case"FETCH_BOARDS_SUCCESS":return Object(q.a)({},e,{list:t.payload,loading:!1,error:!1});case"FETCH_BOARDS_FAILURE":return Object(q.a)({},e,{loading:!1,error:!0});default:return e}},images:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_IMAGES_REQUEST":case"DOWNLOAD_IMAGES_REQUEST":case"REMOVE_IMAGES_REQUEST":return Object(q.a)({},e,{loading:!0,error:!1});case"FETCH_IMAGES_SUCCESS":case"DOWNLOAD_IMAGES_SUCCESS":case"REMOVE_IMAGES_SUCCESS":return Object(q.a)({},e,{list:t.payload||Object(X.a)(e.list),loading:!1,error:!1});case"FETCH_IMAGES_FAILURE":case"DOWNLOAD_IMAGES_FAILURE":case"REMOVE_IMAGES_FAILURE":return Object(q.a)({},e,{loading:!1,error:!0});default:return e}}});var te=Object(l.a)(),ae=function(e){var t=Object(z.composeWithDevTools)(Object(P.applyMiddleware)(e,Y.a));return Object(P.createStore)(ee,t)}(te);te.run(K);a(75),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement((function(){return r.a.createElement(i.a,{store:ae},r.a.createElement(L,null,r.a.createElement(N,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.56d359a9.chunk.js.map